<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SBB Clock</title>
<style>
  #fullscreen-btn {
    position: fixed;
    bottom: 15px;
    right: 15px;
    background: rgba(0,0,0,0.6);
    border: none;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1100;
    transition: background-color 0.3s ease;
  }
  #fullscreen-btn:hover {
    background: rgba(255,255,255,0.9);
  }
  #fullscreen-btn svg {
    width: 24px;
    height: 24px;
    fill: white;
  }
  #rights-text {
    position: fixed;
    bottom: 75px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 90vw;
    color: #aaa;
    font-size: 0.9em;
    text-align: center;
    z-index: 1099;
    transition: opacity 0.3s ease;
  }
  #rights-text.hidden {
    opacity: 0;
    pointer-events: none;
    user-select: none;
    height: 0;
    margin: 0;
    overflow: hidden;
  }
  /* simulazione fullscreen iOS */
  .ios-fullscreen {
    position: fixed !important;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background: black;
    z-index: 1000;
  }
</style>

<div id="wrapper">
  <div id="clock-container"></div>
</div>

<button id="fullscreen-btn" title="Entra in fullscreen" aria-label="Toggle fullscreen">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" >
    <path d="M8 3H5a2 2 0 0 0-2 2v3"/>
    <path d="M16 3h3a2 2 0 0 1 2 2v3"/>
    <path d="M8 21H5a2 2 0 0 1-2-2v-3"/>
    <path d="M16 21h3a2 2 0 0 0 2-2v-3"/>
  </svg>
</button>

<p id="rights-text">
  Orologio ispirato al progetto open source di <a href="https://github.com/sbb-design-systems/brand-elements" target="_blank" rel="noopener noreferrer" style="color:#ccc;">SBB</a>. Marchi e loghi appartengono ai rispettivi titolari.
</p>

<script>
  const fullscreenBtn = document.getElementById('fullscreen-btn');
  const wrapper = document.getElementById('wrapper');
  const rightsText = document.getElementById('rights-text');

  function isIOS() {
    return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
  }

  function updateRightsTextVisibility(isFullscreen) {
    if (isFullscreen) {
      rightsText.classList.add('hidden');
      fullscreenBtn.title = 'Esci fullscreen';
      fullscreenBtn.querySelector('svg path').setAttribute('d', 'M16 8v-3a2 2 0 0 0-2-2h-3'); // icona exit fullscreen (modifica semplice)
    } else {
      rightsText.classList.remove('hidden');
      fullscreenBtn.title = 'Entra in fullscreen';
      fullscreenBtn.querySelector('svg path').setAttribute('d', 'M8 3H5a2 2 0 0 0-2 2v3'); // icona fullscreen
    }
  }

  fullscreenBtn.addEventListener('click', () => {
    if (!document.fullscreenElement && !wrapper.classList.contains('ios-fullscreen')) {
      if (isIOS()) {
        wrapper.classList.add('ios-fullscreen');
        updateRightsTextVisibility(true);
      } else {
        wrapper.requestFullscreen()
          .then(() => updateRightsTextVisibility(true))
          .catch(() => alert('Fullscreen non supportato su questo dispositivo.'));
      }
    } else {
      if (isIOS()) {
        wrapper.classList.remove('ios-fullscreen');
        updateRightsTextVisibility(false);
      } else {
        document.exitFullscreen()
          .then(() => updateRightsTextVisibility(false));
      }
    }
  });

  document.addEventListener('fullscreenchange', () => {
    if (!document.fullscreenElement && !wrapper.classList.contains('ios-fullscreen')) {
      updateRightsTextVisibility(false);
    }
  });

  updateRightsTextVisibility(false);

  document.addEventListener('keydown', e => {
    if (e.key.toLowerCase() === 'f' && !['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {
      fullscreenBtn.click();
    }
  });
</script>

</body>
</html>

</html>
